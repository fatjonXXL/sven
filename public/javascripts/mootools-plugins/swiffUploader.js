Swiff.Uploader=new Class({Extends:Swiff,Implements:Events,options:{path:"Swiff.Uploader.swf",multiple:true,queued:true,typeFilter:null,url:null,method:"post",data:null,fieldName:"Filedata",callBacks:null},initialize:function(d){if(Browser.Plugins.Flash.version<9){return false}this.setOptions(d);var a=this.options.callBacks||this;if(a.onLoad){this.addEvent("onLoad",a.onLoad)}var c={},b=this;["onSelect","onAllSelect","onCancel","onBeforeOpen","onOpen","onProgress","onComplete","onError","onAllComplete"].each(function(f){var g=(a[f])?a[f]:$empty;c[f]=function(){b.fireEvent(f,arguments,10);return g.apply(b,arguments)}});c.onLoad=this.load.create({delay:10,bind:this});this.options.callBacks=c;var e=this.options.path;if(!e.contains("?")){e+="?noCache="+$time()}delete this.options.params.wMode;this.parent(e);if(!this.options.container){document.body.appendChild(this.object)}return this},load:function(){this.remote("register",this.instance,this.options.multiple,this.options.queued);this.fireEvent("onLoad")},browse:function(a){return this.remote("browse",$pick(a,this.options.typeFilter))},upload:function(a){var b=this.options;a=$extend({data:b.data,url:b.url,method:b.method,fieldName:b.fieldName},a);if($type(a.data)=="element"){a.data=$(a.data).toQueryString()}return this.remote("upload",a)},removeFile:function(a){if(a){a={name:a.name,size:a.size}}return this.remote("removeFile",a)},getFileList:function(){return this.remote("getFileList")}});